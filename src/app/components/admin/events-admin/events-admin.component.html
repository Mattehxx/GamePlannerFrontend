<div class="container" [class.dashboarsIsOpen]="this.ds.isOpen">
    <div class="table-container">
        <div class="header-bar">
            <h1 class="page-title">Events Management</h1>
            <div class="search-bar-cont">

                <div class="search-bar">
                    <input type="text" placeholder="Search events..." (keyup)="applyFilter($event)">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </div>
                <!-- (keyup)="applyFilter($event)" -->

                <div class="btn-create" (click)="openCreateEventModal()">
                 Create Event
                </div>
            </div>
        </div>


        

        <table mat-table [dataSource]="dataSource" 
            class="mat-elevation-z8 event-table">
            <ng-container matColumnDef="Event">
                <mat-header-cell *matHeaderCellDef> Event </mat-header-cell>
                <mat-cell *matCellDef="let event">
                    <div class="event-name">
                        {{event.name}}
                    </div>

                    @if(event.isDeleted){
                        <div class="status-disabled"> <span>INACT </span></div>
                        }
                        @else {
                        <div class="status-enabled"> <span>ACT </span> </div>
                        }
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Admin">
                <mat-header-cell *matHeaderCellDef> Admin </mat-header-cell>
                <mat-cell *matCellDef="let event"> <div class="admin-cell"> <img [src]="admin.imgUrl"> {{event.admin.name}} {{event.admin.surname}}</div> </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Sessions">
                <mat-header-cell *matHeaderCellDef> Sessions </mat-header-cell>
                <mat-cell *matCellDef="let event"> <div class="sessions-cell">{{event.gameSessions?.length}}</div> </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Visibility">
                <mat-header-cell *matHeaderCellDef> Visibility </mat-header-cell>
                <mat-cell *matCellDef="let event">
                    <div class="visibility" *ngIf="event.isPublic"><i class="fa-regular fa-eye"></i></div>
                    <div class="visibility" *ngIf="!event.isPublic"><i class="fa-regular fa-eye-slash"></i></div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Actions">
                <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                <mat-cell *matCellDef="let event">
                    <div class="btn-details" (click)="goToEventDetail(event)">View Details</div>
                </mat-cell>
            </ng-container>

            <!-- Righe della tabella -->

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>

            <mat-row *matRowDef="let row; columns: displayedColumns;" class="data-row" [class.eventDisabled]="row.isDeleted"
                (click)="$event.stopPropagation(); toggleFilters()">

            </mat-row>

        </table>

        <mat-paginator [pageSize]="10" showFirstLastButtons></mat-paginator>


    </div>
</div>